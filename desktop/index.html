<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WaveChat</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

<header class="topbar">
  <div class="brand">
    <div class="logo-dot"></div>
    <div>
      <div class="brand-name">WaveChat</div>
      <div class="brand-sub">Peer-to-Peer Video</div>
    </div>
  </div>

  <span class="status-pill">
    <span class="status-dot"></span>
    <span class="status-text">Ready</span>
  </span>
</header>

<p id="notification" class="notification" hidden></p>

<!-- Entry Modal -->
<div class="modal-backdrop" id="entry-modal">
  <div class="modal">
    <h2>Join a Room</h2>
    <input id="room-input" class="room-input" placeholder="Room ID" />
    <div class="modal-actions">
      <button class="btn btn-primary" onclick="createRoom()">Create</button>
      <button class="btn btn-secondary" onclick="joinRoom()">Join</button>
    </div>
  </div>
</div>

<!-- Main -->
<main class="meet">
  <div class="stage">
    <!-- Remote -->
    <div class="video-card video-remote">
      <video id="remote-video" autoplay playsinline></video>
      <span class="pill top-left">Remote</span>
    </div>

    <!-- Local PIP -->
    <div class="pip">
      <div class="video-card">
        <video id="local-video" autoplay muted playsinline></video>

        <!-- ğŸ‘‡ Overlay canvas for landmarks (local) -->
        <canvas id="local-overlay" class="overlay"></canvas>

        <span class="pill top-left">You</span>
      </div>
    </div>
  </div>

  <!-- Controls -->
  <footer class="controls">
    <button class="btn btn-ghost" onclick="toggleMic()">ğŸ¤</button>
    <button class="btn btn-ghost" onclick="toggleCamera()">ğŸ¥</button>
    <button class="btn btn-ghost" onclick="startScreenShare()">ğŸ–¥ï¸</button>
    <button class="btn btn-ghost" onclick="toggleChat()">ğŸ’¬</button>
    <button class="btn btn-ghost" onclick="toggleSettings()">âš™ï¸</button>
    <button class="btn btn-danger" onclick="leaveCall()">â›”</button>
  </footer>
</main>

<!-- Side Panels -->
<div id="chat-panel" class="side-panel">
  <h3>Chat</h3>
  <div class="panel-body">(chat coming soon)</div>
</div>

<div id="settings-panel" class="side-panel">
  <h3>Settings</h3>
  <div class="panel-body">
    <div class="setting-row">
      <label>
        <input type="checkbox" id="cv-toggle" checked />
        Enable hand/face tracking
      </label>
    </div>
    <div class="setting-row">
      <label>
        <input type="checkbox" id="cv-mirror" checked />
        Mirror overlay (selfie view)
      </label>
    </div>
    <div class="setting-row small-muted">
      Tracking runs locally on your device.
    </div>
  </div>
</div>

<!-- WebRTC/PeerJS -->
<script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>

<!-- MediaPipe (no import/require) -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>

<!-- The app -->
<script src="script.js"></script>

</body>
</html>
